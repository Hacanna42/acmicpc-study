# <span style="color:yellow">2024-11-10</span>

11/10 오늘의 목표
1. 리팩토링 100% 완료하기
2. 테스트코드 작성하기
3. 소감문 작성 시작



### 체크리스트
- [x] Java Enum 적용하여 상수 처리 ✅ 2024-11-10
- [x] 메서드의 길이가 10라인을 넘어가지 않도록 분리 ✅ 2024-11-10
- [x] depth가 2를 초과하는 것이 없도록 ✅ 2024-11-10
- [x] else 예약어 사용 금지 ✅ 2024-11-10
- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들기 ✅ 2024-11-10
- [x] 테스트 코드 작성 ✅ 2024-11-10
- [ ] 객체를 객체답게. 역할 분리 점검

테스트 코드 이전에 먼저 객체의 역할 분리를 점검하자.

멤버십 할인 8,000원 한도를 깜박했다. 방금 기능을 추가했다.
클린 코드의 중요함을 진짜 너무 뼈저리게 느끼는 과제다.



테스트코드도 작성했는데, 정말 모든 클래스와 객체에 대해 테스트를 작성하려니까 시간이 많이 부족하다..
그래서 일단 각 패키지에 대해 제일 상위의 객체만 테스트 코드를 작성했다.


사실 이번 과제는 진짜 어디까지 할 수 있나 최대한 보여줄 수 있던 과제라고 생각한다...
시간이 더 있었으면 많은 개선을 할 수 있었을텐데 구현 자체가 너무 고난이도였어서 리팩토링을 할 시간이 부족했던 것 같다.

과제를 제출했는데 예제 테스트케이스를 하나 통과 못했다고 떴다.
설마 하고 우려했던 로직을 넣으니까 모두 통과됐다.

이번 과제는 정말 모호한 설명이 너무 너무 너무 너무 많았다고 생각한다... 
참가자의 임기응변력을 테스트한거라면 성공이다.


- - -

객체 역할 분리를 점검하려고 했는데, 회고 + 소감문 쓸 시간도 없고.. 사실 개선점들이 몇 개 보이지만 이것을 지금 수정하기엔 마감 기한안에 못 끝내서 일단 코드 리팩토링은 여기서 끝내기로 마음 먹었다.

일단 TC는 모두 통과했으니 소감문과 회고 내용에 집중해야겠다.



\[ 4주차 특이사항 정리 \]
1. 처음부터 너무 구체적인 설계를 하지 않고 먼저 틀이라도 잡도록 노력했다
2. Service 계층에 대해 알아보고 도입해봤다
3. 함수형 인터페이스와 Supplier에 대해 학습했다. 동작을 지연시킨다는 개념이 너무 유용했다.
4. 일급 컬렉션을 적극적으로 활용했다.
5. 공용 인터페이스는 가볍게 만들고, 복잡한 내부 구현은 숨기도록 노력했다.
6. 아무리 고민해도 풀리지 않는 로직들이 있었다. 2주차때의 방법처럼 상황을 정리하고 차원 높게 생각하니 풀려갔다.
7. 구현 각이 안나오면 일단 naive 하게 -> 리팩토링
8. Java Enum을 적극적으로 활용했고, 특정 클래스에서만 사용되는 Enum은 내부 클래스로 구조를 단순화했다.
9. 프로젝트 규모가 커지고 로직이 복잡해지면서 클린 코드의 중요함을 진짜 너무 뼈저리게 느꼈다. 메서드의 역할 분리를 잘 했다면 다음에 새로운 로직이 생겨도 레고를 조립하듯 할 수 있을 것 같다.
10. 테스트 코드를 작성할 시간이 부족했다. 따라서 제일 상위(대표)객체로 생각되는 애들만 일단 테스트코드를 작성했다.
11. 이번 과제는 진짜 어디까지 할 수 있나 최대한 보여줄 수 있는 판을 짜준 것이라고 생각한다.
12. 모호한 설명인 너무 너무 많아서 힘들었다.


Service가 View와 직접적인 의존을 하는데 이게 맞는것일까? Controller의 역할 아닐까?
근데 View를 호출해야 하는 부분이 상품 결제 과정에서 재고 부족이나 프로모션 아이템 추가 가능 알림 등이기 때문에,, 이것을 상위 Controller로 위임하는 것은 현재 상황에선 어렵다..

그리고 현재의 StoreService는 OrderService를 DI 받는데 이것이 맞는 설계인지도 잘 모르겠다.

사실 설계엔 정답이 없으니까..! MVC 패턴 공식에 대한 옳고 그름을 따지는 것보다는 현재 주어진 과제에서 내가 효율적인 방식으로 작업을 처리했는지가 중요한 것 같다.