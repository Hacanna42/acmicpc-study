어제 새 미션 블랙잭이 시작되었고,
페어로는 우가와 매칭되었다.

배운점이 많았다. 먼저, 출석 미션에서 제대로 느끼지 못했던 TDD의 정수를 느꼈다. 
우가는 생성자에도 TDD를 하는 정말 TDD의 정석인 크루인데, 덕분에 TDD의 장점과 남들이 그렇게 말하던 안정감, 리듬감에 대해 잘 알게 되었다.

또, 출석 미션은 TDD를 처음 배우고 적용하는 과정 때문에 설계가 매끄럽지 않았는데.
이번 블랙잭 미션은 TDD도 적용하면서 설계도 꽤나 매끄럽게 한 것 같아서 기분이 좋다.

TDD.. 이제 TDD가 좋아졌다.
사실, 어느정도의 과정은 생략하면 더 좋은 결과를 낼 수 있을 것 같지만.

TDD를 하면서 자연스럽게 얻어진 개발 원칙들도 있는데.
예를 들면 Controller와 View는 항상 맨 마지막에 작성한다던지. 이런것들이 확실히 설계에 도움이 되는 것 같다.
나는 평소에 조금 점진적으로, 그니까 도메인을 구현하면서 컨트롤러와 뷰도 어느정도 구현을 했던 것 같은데.. (왜냐면 그래야 프로젝트가 진전이 된 것 같아서, 그래야만 구현을 어느정도 한 것 같은 느낌을 받았기 때문이다.)

근데, Controller와 View를 맨 마지막에 작성한다. 즉, 모델의 모든 구현을 마치고 컨트롤러에서 조립만 한다. 라는 개념은 모델을 설계하는데에 도움이 많이 되는 것 같다. 정말로 코딩할 때, 우리를 두가지의 관점; 클래스 작성자와 클라이언트 프로그래머로 나눠서 개발하는 느낌이랄까?

우리는 블랙잭을 구현할 때 필요한 모델들을 제공할테니까, 클라이언트 프로그래머가 컨트롤러에서 조립하는 느낌이다.

그러면 객체를 설계하면서 캡슐화를 무조건 지킬 수 밖에 없게 되고,**자연스럽게 객체 간 역할 분리를 명확하게 하게 만든다.** 
또 이것 말고 Controller를 마지막에 작성하는 게 가져오는 긍정적인 사이드 이펙트가 많은 것 같은데. 지금 말로써 설명하긴 힘들다. (내가 아직 그 정도의 레벨이 안 돼서)

그리고, Controller를 작성하지 않는게 익숙치 않아서 프로그램의 흐름을 못 따라가겠다면 pseudo code(의사 코드) 를 작성하는 것이 도움이 된다.

어쨌든, 어차피 프로덕션 코드에 대한 테스트 코드는 작성해야 하지 않는가? 내가 혼자 알고리즘 문제 풀이를 하는게 아니라 일반 사용자용 서비스를 개발한다면 더더욱 그렇고...

어차피 프로덕션 코드에 대한 테스트 코드를 작성할거라면, 시간이 많이 소요된다는 TDD의 단점은 상쇄된다.
그래서. 나도 앞으로 개발을 TDD로 하게 될 것 같다.

- - - 

### 왜 굳이 테스트 코드를 프로덕션 이전에 작성할까?
온전히 나의 생각에서 비롯된 것들이다. 인터넷 레퍼런스는 참고하지 않고 썼다 (내 생각에 관여할까봐)
사실, 테스트 코드를 잘 작성하는데 TDD를 안 한다면 매번 프로덕션 코드에서 하나의 메서드를 작성할 때마다 그것에 대응되는 테스트 코드를 작성할 수도 있다. 근데, 왜 TDD를 주장하는 사람은 그것보다 테스트 코드를 먼저 작성하는 게 좋다고 생각할까?

- 메서드가 직관적으로 그 일만을 하게 된다.
예를 들어서, 우리가 TDD가 아닌 일반적인 프로덕션 코드 개발 방법을 사용한다고 했을 때, 우리가 원하는 기능을 가진 메서드를 생성할 것이다. 여기서 문제는 그 기능이 충분히 작은 단위가 아닐 수도 있다. TDD라는 것은 매 단계마다 단위 테스트 코드를 먼저 작성해야 하기 때문에, 자연스럽게 프로덕션에서 제일 작은 단위 기준으로 메서드를 분리하게 된다. 이것은 명확하고 직관적인 메서드를 도출해낸다고 생각한다.
 또 다른 예로는, 예를 들어 개발자는 프로덕션 코드를 작성하면서 이후의 이 메서드의 반환 값은, B라는 메서드의 파라미터로 바로 연결할거라고 계획하고 있을 수도 있다. 그러면 나도 모르게 이 메서드의 반환 값을 간접적으로 B와 연관되게 지을 수도 있다. 이것은 메서드의 직관성을 파괴한다. 

-  빠른 피드백
이것은 사소한 거지만, 둘의 장단점이 비슷한 상황에서는 TDD가 좀 더 낫다고 판단하는데에 도움이 될 수 있다. TDD의 경우 프로덕션 코드를 완성하는 즉시 피드백을 받는다(성공, 실패). 하지만, TDD가 아닌 경우 프로덕션 코드를 완성하고 -> 그 코드를 테스트 할 테스트 코드를 작성해야 한다. 즉각적인 피드백이 일어나지 않는다.


따라서 정리한 나의 생각은..

1. 프로덕션 구현 100% 완료 이후 테스트 코드 작성 -> 너무 비효율적이다. 오류를 늦게 발견할 수 있고, 그것을 수정하는 과정에서 중대한 변경이 일어날지도 모른다. 좋은 점이 하나 있다면 테스트 코드가 깨지는 것을 걱정하지 않아도 된다. 바쁠 때 유효하다.
2. 프로덕션의 작은 단위를 구현한 후 테스트 코드 작성, 반복 -> 테스트 코드를 작성하고 오류를 조기에 발견하는 좋은 방법 같다.
3. 테스트 코드의 작은 단위를 먼저 작성하고 프로덕션 구현, 반복 ->  우리의 사고를 뒤바꿔서, 더 좋은 설계를 하기 위한 방법 같다. 이 말은, TDD를 하지 않는 사람은 TDD를 하는 사람보다 덜 좋은 설계를 한다는 뜻이 아니라, TDD는 좋은 설계를 위한 하나의 사고 장치를 가지고 있는 것과 같다. 즉 TDD를 사용하지 않는 사람이 좋은 설계를 할 수 있는 실력이 있다면 굳이 TDD를 할 필요가 없을 것 같다. 하지만, TDD는 분명 좋은 설계를 하기 위한 효율적인 훈련법이다.








- - -

# 가독성 개선 버전

# 블랙잭 미션과 TDD 회고

어제 새 미션 **블랙잭**이 시작되었고, 페어로는 **우가**와 매칭되었다.

배운 점이 많았다. 먼저, 출석 미션에서는 제대로 느끼지 못했던 **TDD의 정수**를 체감할 수 있었다.  
우가는 **생성 과정에서도 TDD를 철저히 적용하는 크루**였는데, 덕분에 **TDD의 안정감과 리듬감**을 확실히 이해할 수 있었다.

출석 미션 때는 **TDD를 배우면서 적용하는 과정**이어서 설계가 매끄럽지 않았지만,  
이번 블랙잭 미션에서는 **TDD를 적용하면서도 설계를 더 정교하게 다듬을 수 있었다.**  
덕분에 이번 미션이 꽤 만족스럽다.

## TDD가 좋아졌다
이제 TDD가 좋아졌다.  
물론, 어느 정도 과정은 생략하면 더 빠르게 개발할 수도 있을 것 같다.  
하지만 **TDD가 자연스럽게 좋은 개발 원칙을 체득하도록 유도한다**는 점이 인상적이었다.  

예를 들면, Controller와 View를 맨 마지막에 작성한다는 점이다.
이런 방식이 설계에 큰 도움이 된다고 느꼈다.  

나는 평소에 도메인을 구현하면서 **Controller와 View도 어느 정도 함께 작성**하는 편이었다.  
그렇게 해야 프로젝트가 진전되는 느낌이 들었고, "어느 정도 구현을 마쳤다"는 심리적 만족감도 있었다.  

하지만 **Controller와 View를 마지막에 작성**하는 방식은 설계에 훨씬 도움이 되었다.  
즉, **모델을 완성한 후, Controller에서 조립만 한다**는 개념이 더욱 명확한 구조를 만들었다.  
이 방식은 개발할 때 **"클래스 작성자 vs 클라이언트 프로그래머"**라는 두 가지 관점을 분리하는 데에도 효과적이었다.

예를 들어, 우리는 클래스 작성자로서 블랙잭을 구현할 때 **필요한 모델들을 제공하는 역할**을 하고,  
클라이언트 프로그래머가 **Controller에서 이를 조립하는 느낌**으로 개발할 수 있었다.  

### Controller를 마지막에 작성하는 장점
- **객체 간 역할 분리를 명확하게 만든다.**  
- **캡슐화를 자연스럽게 지킬 수밖에 없게 된다.**  
- **설계를 먼저 고민하게 되어, 더 단순하고 직관적인 구조를 유도한다.**  

Controller를 마지막에 작성하는 것이 가져오는 **긍정적인 부수 효과**가 더 많을 것 같지만,  
지금은 아직 말로 정리하긴 어렵다. (내가 그 정도 레벨이 아니라서 😅)

그리고, **Controller가 없으면 프로그램의 흐름을 따라가기 어려운 경우**에는  
**pseudo code(의사 코드)를 작성하는 것이 도움이 된다.**  

어쨌든, 서비스 개발에서는 **프로덕션 코드에 대한 테스트 코드를 반드시 작성해야 한다.**  
그렇다면 **시간이 오래 걸린다는 TDD의 단점은 사실상 상쇄된다.**  
결국, 나도 앞으로 개발을 **TDD 방식으로 하게 될 것 같다.**

---

## 왜 굳이 테스트 코드를 프로덕션 이전에 작성할까?

사실 이것은 내가 TDD의 장점을 몰랐을 때 많이 생각했던 내용이다. 
TDD의 장점에 대해 직접 느끼고 난 이후, 내 생각에 대해 써봤다.
(내 생각일 뿐이다)

사실, **테스트 코드를 잘 작성하는데 TDD를 하지 않는다면**  
매번 프로덕션 코드에서 메서드를 작성한 후, 그에 맞는 테스트 코드를 작성할 수도 있다.  

그런데, 왜 TDD를 주장하는 사람들은 **테스트 코드를 먼저 작성하는 것이 더 낫다고 생각할까?** 🤔

### 1. 메서드가 직관적으로 그 역할만 하게 된다.
TDD를 사용하지 않으면, 우리는 먼저 **원하는 기능을 가진 메서드를 생성**할 것이다.  
하지만 문제는 **그 기능이 충분히 작은 단위가 아닐 가능성**이 크다는 점이다.  

TDD는 **매 단계마다 단위 테스트를 먼저 작성해야 하므로**,  
**자연스럽게 더 작은 단위의 메서드로 분리하게 된다.**  
이는 **명확하고 직관적인 메서드**를 도출하는 데 큰 도움이 된다.

또 다른 예로, 개발자가 프로덕션 코드를 작성하면서  
"이 메서드의 반환값을 이후에 **B라는 메서드의 파라미터로 바로 연결할 것**"이라고 계획할 수도 있다.  
그렇게 되면 **무의식적으로 이 메서드의 반환값을 B와 간접적으로 연관되게 지을 수도 있다.**  
이는 **메서드의 직관성을 해치는 요인**이 된다.

### 2. 즉각적인 피드백을 받을 수 있다.
이것은 사소한 것 같지만, **둘의 장단점이 비슷한 상황에서는 TDD가 더 낫다고 판단하는 이유**가 된다.

- **TDD의 경우** 프로덕션 코드를 완성하는 즉시 **성공/실패 여부를 확인**할 수 있다.  
- **비TDD의 경우** 프로덕션 코드를 완성한 후, 그 코드를 테스트할 **테스트 코드를 추가로 작성해야 한다.**  
  즉, **즉각적인 피드백이 일어나지 않는다.**  

---

## 나의 정리

1. **프로덕션 구현 100% 완료 후 테스트 코드 작성**  
   → **너무 비효율적이다.**  
   → 오류를 늦게 발견할 가능성이 높고, 수정 과정에서 **큰 변경이 발생할 위험**이 있다.  
   → **장점:** 테스트 코드가 깨질 걱정은 없다. (바쁠 때는 이 방식이 유효할 수 있음.)  

2. **프로덕션의 작은 단위를 구현한 후 테스트 코드 작성 (반복)**  
   → 테스트 코드를 작성하면서 **오류를 조기에 발견하는 좋은 방법** 같다.

3. **테스트 코드를 먼저 작성하고 프로덕션 구현 (반복) → TDD**  
   → **사고를 전환하여 더 좋은 설계를 하기 위한 설계 방법** 같다.  
   → 이 말은, **TDD를 하지 않는 사람이 TDD를 하는 사람보다 덜 좋은 설계를 한다는 뜻이 아니다.**  
   → **TDD는 좋은 설계를 위한 하나의 사고 장치일 뿐이다.**  
   → 즉, **TDD 없이도 좋은 설계를 할 수 있는 실력이 있다면 굳이 TDD를 강제할 필요는 없다.**  

하지만, **TDD는 분명 좋은 설계를 위한 효율적인 훈련법이다.**  
그래서 나도 앞으로 TDD를 더 적극적으로 활용하려고 한다. 🚀
