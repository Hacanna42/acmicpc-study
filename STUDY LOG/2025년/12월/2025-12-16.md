- 데이터라이즈 Backend Engineer 과제
데이터라이즈 입사를 위한 과제를 시작했다. 제출 마감은 22일까지다.
단순히 구현하는 것이 아니라, 어떤 기술을 왜 선택할건지를 먼저 정리하고나서 구현을 시작 할 예정이다.

일단 과제 기간이 일주일이기 때문에 적합한 프레임워크를 선정하여 다시 학습하는 것은 무리고, 현재 가장 익숙하고 나에게 러닝 커브가 작은 Spring Boot를 사용하겠다.


# 기술 스택
- Java 21
- Spring Boot 3.5.8
- MySQL


## 기술 스택 선정 흐름
### Java와 Spring Boot를 선택한 이유
- 이유 : 빠르게 제품을 출시해야하는 상황, java, spring 기술 보유한 상태.
- 타 프레임워크에 비해 유지보수성 용이.
    - 강제적인 계층 구조 및 강력한 타입 제한을 통한 추후 유지보수 편의성 증가
        - 서비스를 단기로 끝내지 않고 지속적으로 유지보수를 진행할 것으로 기획했기 때문에 유지보수성을 중요하게 생각한다.
        - 사용자 피드백을 받아 기능 추가 및 삭제가 일어나면 계층 구조를 통해 변경의 영향을 한 곳에 모을 수 있어 좋다
    - OOP 기반
    - 추상화
    - DI와 AOP 지원으로 관심사 분리가 용이하다.
- 스프링보다는 스프링 부트가 여러 면에서 좋음(초기세팅 난이도, 보안, 내장서버 있어서 테스트 편함 등)
- 스프링 부트가 다른 프레임워크에 비해 좋은 점들 < 찾아야됨
- 코틀린을 쓰지 않는 이유
    - 코틀린
        - 장점: NullSafe, 불변성?
        - 단점: 배워야 해서 속도 느림


## Java 언어 버전은 몇으로 할까?
일단 최소 17 이상(Spring boot 3.1.3은 17 이상부터 호환). 21이 17보다 2년정도 지원기간이 더 길다.
추후 17에서 제공하지 않고 21에서만 제공하는 기능(가상스레드) 때문에 마이그레이션이 필요해진다면 그 비용이 크다.(라이브러리 호환성 체크 등)
우리가 사용하는 라이브러리가 21의 최신 기능을 사용하기 때문에, 간접적으로 이득을 본다.(우리가 직접 쓰지 않아도 라이브러리가 간접적으로 사용하고 있을 수 있다.)
21 버전에 단점이 없다면, 17을 할 이유가 없다.

근데 최근에 Java 25 LTS도 출시한 것으로 보인다. Java 21과 Java 25중에 무엇을 선택해야 할지 고민 할 필요가 있다.  그리고 새로운 버전이기 때문에 아직 커뮤니티에 관련 정보도 부족할 것이고 Java 25로 프로젝트를 진행했을 때 예상치 못한 변수가 발생할 수 있다.

Java 25를 선택했을 때의 장점은 Java 25에서는 기본 객체 헤더의 용량을 64비트로 줄였는데, 이게 힙 메모리 사용량을 생각보다 줄여준다고 한다. 그렇더라도 Java 25의 성능 향상 체감을 이번 프로젝트에서 받을 일은 없어 보이지만, 굳이 Java 21을 선택하지 않는다면 이유는 부족한 커뮤니티 자료로 인해 문제 발생 시 난항을 겪을 수 있다는 점이 있다.

그러면 실제로 커뮤니티에 Java 25 관련 자료가 부족한지 확인하고, 결과에 따라서 21이나 25중에 하나를 선택
하겠다.

```
커뮤니티 자료 부족 추산 - 상당히 부족한 상태:
	1.	Reddit 활동도의 한계 - Reddit에서 Java 25 관련 논의가 제한적입니다. 검색 결과에 보이는 스레드들이 9월~11월 초반에 집중되어 있으며, 구체적인 문제 해결 관련 글이나 트러블슈팅 경험담이 부족합니다. 예를 들어 “How was your experience upgrading to JDK25?” 같은 글도 11월 상당히 후반에 나타났고, 아직도 매우 초기 단계입니다.
	2.	라이브러리 생태계 미성숙 - Java 커뮤니티 내 의견에 따르면, Non-LTS 버전뿐 아니라 LTS 버전도 충분한 테스트와 지원을 받기까지 상당한 시간이 필요합니다. Java 25는 LTS이지만, 라이브러리 개발자들과 기업들이 실제로 업그레이드해서 테스트하고 이슈를 보고하기까지는 여전히 시간이 필요한 상태입니다.
	3.	예상 자료 증가 시점:
	•	단기(지금~6개월): 계속 부족할 것 같습니다. 초기 얼리어답터 관련 글 정도만 축적 중
	•	중기(6개월~1년): 기업들이 마이그레이션을 시작하면서 실제 트러블슈팅 사례가 늘어나기 시작
	•	장기(1년 이상): Stack Overflow, GitHub Issues, 블로그 포스트 등에서 상당한 양의 자료가 축적될 것으로 예상
```

나의 개인 프로젝트였다면 Java 25를 선택했을텐데, 시간이 정해져있고 제출 후 사용되지 않을 과제이기 때문에 Java 21를 선택하겠다.

## Spring Boot 버전은 몇으로 할까?
주요 고민: 2025년 11월 20일에 출시한(한달도 안됨) Spring Boot 4.0.0을 써야 하는가? 아니면 약간 보수적으로 Spring Boot 3.5.8 버전을 사용할까?

일단 최소 3.2 이상(Java 21은 SpringBoot 3.2부터 지원)
4.0.0 버전은 출시한 지 한달 미만이므로 커뮤니티 정보가 부족할 가능성 있음. 4.0.0은 Java 25를 지원하는 최초의 스프링 부트 버전임.

결론: Java 버전 선택 이유와 같이 보수적으로 Spring Boot 3.5.8 버전을 선택하겠다.


### Gradle VS Maven (빌드 자동화 도구)
- 왜 Maven을 선택하지 않았는지
    - xml… 태그 기반이 읽기 어려움, gradle에 비해 불필요하게 파일이 길어짐
### Groovy vs Kotlin (빌드 자동화 도구를 정의하는 언어)
- 코틀린을 안쓰니까 그루비를 했다.
- 나중에 마이그레이션하는 데 비용이 크지 않다.

- **Spring Boot**는 **유지보수성 측면에서 가장 강력한 프레임워크 중 하나**입니다.
    - 이유: 객체지향 설계, 강한 타입 안정성, DI, 계층 분리 구조, 표준화된 아키텍처
- **FastAPI, Node.js, Go**는 각각 빠른 개발, 경량 서버, 고성능에는 유리하지만, **유지보수 측면에서는 상대적으로 불리**
- 특히 장기적인 기능 확장, 팀 협업, 도메인 복잡성 대응이 중요할 경우 → **Spring Boot 권장**


## DB는 NoSQL? or RDB?
일단 RDBMS vs NoSQL
티켓팅 서비스는 ACID가 중요함. NoSQL은 BASE(BASE는 **Basically Available, Soft state, Eventual consistency**의 약어로,  
NoSQL 데이터베이스에서 사용되는 설계 철학)
```
1. **Basically Available (기본적인 가용성)**  
    시스템이 항상 완벽하지 않더라도, 기본적인 가용성을 제공해야 한다는 뜻입니다.  
    예를 들어, 네트워크 지연이나 부분 장애가 있어도 시스템의 일부는 계속 동작해야 합니다.
2. **Soft state (유연한 상태)**  
    데이터의 상태는 항상 정확하지 않을 수 있으며, 시간이 지나면서 변경될 수 있습니다.  
    즉, 특정 시점에서 데이터가 일관되지 않아도 괜찮습니다.
3. **Eventual consistency (최종적 일관성)**  
    데이터의 일관성이 즉시 보장되지 않아도, 시간이 지나면 결국 일관성을 가지게 됩니다.  
    이를 통해 시스템 성능과 확장성을 높일 수 있습니다.
```

티켓팅 서비스에서는 동시성을 제어해야 하고, 원자성(커플석 2좌석 동시 확보 or 실패), 강한 일관성을 가져야 하기 때문에 RDBMS가 더 적합함.


### RDBMS 종류 선택
- MySQL
- PostgreSQL
- etc...

가장 나에게 친숙한 기술: MySQL
큰 문제가 없다면 러닝커브가 없는 MySQL을 선택할 것이다.
물론 PostgreSQL이나 MariaDB를 사용하면 Sequence기능을 사용하여 대량 INSERT 시의 최적화를 노릴 수 있지만, 최적화가 필요한 시점이 다가오면 다시 PostgreSQL과 MariaDB를 고려하기로 함.
Postgre나 Maria를 사용하면 성능 부분에서 최적화 여지가 많을 수도 있겠지만, 빠르게 개발하는 단계에서 잘 모르고 사용하는 것은 오히려 독
MariaDB로 Sequence기능 사용 때 MySQL 기반 문제(InnoDB 테이블 기반 / Dialect 이슈)가 발생할 수 있다는 점을 인지. 최선의 선택은 PostgreSQL로 생각, 하지만 러닝커브와 초기 단계에서 고려할 사항이 아니라 판단


MySQL로 결정




# 도커 사용
> **Spring Boot는 내가 Dockerfile로 이미지 만들고,**
> **MySQL은 공식 이미지 쓰고,**
> 둘을 docker-compose로 동시에 띄운다.